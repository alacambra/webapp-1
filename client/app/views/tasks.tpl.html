<table class="table">
    <thead>
    <tr>
        <th><!-- Aktion --></th>
        <th><a href="javascript:void(0);"
               ng-click="sorting = (sorting === 'title') ? '-title' : 'title'" ng-init="sorting = 'title'">
            <nobr>Titel
                <span class="glyphicon"
                      ng-class="{ 'glyphicon-arrow-down': sorting === 'title', 'glyphicon-arrow-up': sorting === '-title' }">
                </span>
            </nobr>
        </a></th>
        <th>
            <a href="javascript:void(0);"
               ng-click="sorting = (sorting === 'description') ? '-description' : 'description'">
            <nobr>Beschreibung
                <span class="glyphicon"
                      ng-class="{ 'glyphicon-arrow-down': sorting === 'description', 'glyphicon-arrow-up': sorting === '-description' }">
                      </span>
            </nobr>
        </a></th>
        <th>
            <a href="javascript:void(0);" ng-click="sorting = (sorting === 'assignee.firstName') ? '-assignee.firstName' : 'assignee.firstName'">
            <nobr>Zugewiesen <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'assignee.firstName', 'glyphicon-arrow-up': sorting === '-assignee.firstName' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'status') ? '-status' : 'status'">
            <nobr>Status <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'status', 'glyphicon-arrow-up': sorting === '-status' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'startDate') ? '-startDate' : 'startDate'">
            <nobr>Start <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'startDate', 'glyphicon-arrow-up': sorting === '-startDate' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'endDate') ? '-endDate' : 'endDate'">
            <nobr>Ende <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'endDate', 'glyphicon-arrow-up': sorting === '-endDate' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'duration') ? '-duration' : 'duration'">
            <nobr>Aufwand<br />gesch√§tzt <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'duration', 'glyphicon-arrow-up': sorting === '-duration' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'effort') ? '-effort' : 'effort'">
            <nobr>Zeit<br />aufgewendet <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'effort', 'glyphicon-arrow-up': sorting === '-effort' }"></span></nobr>
        </a></th>
        <th><a href="javascript:void(0);" ng-click="sorting = (sorting === 'progress') ? '-progress' : 'progress'">
            <nobr>Fortschritt <span class="glyphicon" ng-class="{ 'glyphicon-arrow-down': sorting === 'progress', 'glyphicon-arrow-up': sorting === '-progress' }"></span></nobr>
        </a></th>
    </tr>
    </thead>
    <tbody>
    <tr class="ng-table-group" ng-repeat-start="task in data | orderBy:sorting" ng-init="task.hideTasks = false">

        <td width="30">
            <input type="checkbox" ng-click="checkedItems[task.id] = checkedItems[task.id] ? false : task" />
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <span class="glyphicon" ng-if="task.tasks.length > 0" ng-class="{ 'glyphicon-chevron-right': !task.hideTasks, 'glyphicon-chevron-down': task.hideTasks }"></span>
                    <strong>{{ task.getShortTitle() }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="text" ng-model="task.title" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.getShortDescription() }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="text" ng-model="task.description" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.getAssignee().getPrettyName() }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="text" ng-model="task.assignee" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.status }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)" ng-init="states = ['Neu', 'Zugewiessen', 'Erledigt']">
                <select ng-model="task.status" ng-options="status for status in states" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.getFormatedStartDate() }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <select ng-model="task.startDate" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.getFormatedEndDate() }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="text" ng-model="task.end" />
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.duration }}</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="range" max="40" step="0.25" ng-model="task.duration" /> {{ task.duration | number:2 }}h
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.effort }}h</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="range" max="40" step="0.25" ng-model="task.time" /> {{ task.time | number:2 }}h
            </div>
        </td>

        <td>
            <div ng-show="!editing(task)">
                <a href="" ng-click="task.hideTasks = !task.hideTasks">
                    <strong>{{ task.progress }}%</strong>
                </a>
            </div>
            <div ng-show="editing(task)">
                <input type="range" ng-model="task.progress" />
            </div>
        </td>

    </tr>
    <tr ng-repeat="task in task.tasks | orderBy:sorting" ng-repeat-end ng-show="task.hideTasks">
        <td></td>
        <td>{{ task.title }}</td>
        <td>{{ task.assignedTo }}</td>
        <td>{{ task.status }}</td>
        <td>{{ task.start }}</td>
        <td>{{ task.end }}</td>
        <td>{{ task.time }}h</td>
        <td>{{ task.progress }}</td>
    </tr>
    </tbody>
</table>
<input type="button" class="btn btn-default" ng-click="editSelected()" value="edit" />
<input type="button" class="btn btn-success" ng-click="saveSelected()" value="save" />
<input type="button" class="btn btn-warning" ng-click="revertSelected()" value="revert" />
<input type="button" class="btn btn-danger" ng-click="deleteSelected()" value="delete" />
